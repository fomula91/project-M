/**
 * =============================================================================
 * Character Action Animations
 * 커스텀 캐릭터 연출용 CSS 애니메이션
 *
 * 엔진의 .animated 클래스와 함께 사용 (duration: 1s, fill-mode: both)
 * 사용법: show character s normal at center with approachCloser
 * =============================================================================
 **/

/* --- approachCloser: 캐릭터가 다가오는 느낌 --- */
@keyframes approachCloser {
	from {
		transform: scale(0.85) translateY(15px);
		opacity: 0;
	}
	to {
		transform: scale(1) translateY(0);
		opacity: 1;
	}
}
.approachCloser {
	animation-name: approachCloser;
}

/* --- stepBack: 한 발 물러나는 느낌 --- */
@keyframes stepBack {
	from {
		transform: scale(1) translateY(0);
		opacity: 1;
	}
	to {
		transform: scale(0.88) translateY(10px);
		opacity: 0.7;
	}
}
.stepBack {
	animation-name: stepBack;
}

/* --- shake: 놀람/분노 표현 --- */
@keyframes shake {
	0%, 100% { transform: translateX(0); }
	10%, 50%, 90% { transform: translateX(-8px); }
	30%, 70% { transform: translateX(8px); }
}
.shake {
	animation-name: shake;
}

/* --- nod: 고개 끄덕임 --- */
@keyframes nod {
	0%, 100% { transform: translateY(0); }
	25% { transform: translateY(8px); }
	50% { transform: translateY(0); }
	75% { transform: translateY(8px); }
}
.nod {
	animation-name: nod;
}

/* =============================================================================
 * Affinity Hint Overlay
 * 호감도 변화 시 표시되는 알림 오버레이
 * ============================================================================= */

.affinity-hint {
	position: absolute;
	top: 12%;
	left: 50%;
	transform: translateX(-50%);
	z-index: 100;
	display: flex;
	align-items: center;
	gap: 0.6em;
	padding: 0.75em 1.6em;
	border-radius: 2em;
	font-size: 1rem;
	font-weight: 500;
	letter-spacing: 0.02em;
	pointer-events: none;
	white-space: nowrap;
	backdrop-filter: blur(12px);
	-webkit-backdrop-filter: blur(12px);
	border: 1px solid rgba(255, 255, 255, 0.25);
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12);
	animation: affinityHintIn 0.5s ease-out both;
}

.affinity-hint--exit {
	animation: affinityHintOut 0.4s ease-in both;
}

/* Sora: blue-lavender */
.affinity-hint--sora {
	background: linear-gradient(135deg, rgba(74, 144, 217, 0.35), rgba(140, 130, 200, 0.3));
	color: #e8f0ff;
	text-shadow: 0 1px 4px rgba(74, 144, 217, 0.4);
}

/* Hana: pink-rose */
.affinity-hint--hana {
	background: linear-gradient(135deg, rgba(232, 123, 161, 0.35), rgba(240, 160, 180, 0.3));
	color: #fff0f4;
	text-shadow: 0 1px 4px rgba(232, 123, 161, 0.4);
}

/* Both: purple-lavender (sora blue + hana pink) */
.affinity-hint--both {
	background: linear-gradient(135deg, rgba(140, 130, 210, 0.35), rgba(200, 140, 180, 0.3));
	color: #f0e8ff;
	text-shadow: 0 1px 4px rgba(160, 130, 200, 0.4);
}

/* Unknown: silver-gray (mysterious) */
.affinity-hint--unknown {
	background: linear-gradient(135deg, rgba(160, 170, 190, 0.35), rgba(130, 140, 160, 0.3));
	color: #e8ecf2;
	text-shadow: 0 1px 4px rgba(160, 170, 190, 0.4);
}

.affinity-hint__icon {
	font-size: 1.3em;
	animation: affinityIconPulse 0.8s ease-in-out 0.3s 1 both;
}

.affinity-hint__text {
	font-family: 'Noto Sans KR', sans-serif;
}

/* Keyframes */
@keyframes affinityHintIn {
	from {
		opacity: 0;
		transform: translateX(-50%) translateY(-12px);
		filter: blur(6px);
	}
	to {
		opacity: 1;
		transform: translateX(-50%) translateY(0);
		filter: blur(0);
	}
}

@keyframes affinityHintOut {
	from {
		opacity: 1;
		transform: translateX(-50%) translateY(0);
	}
	to {
		opacity: 0;
		transform: translateX(-50%) translateY(-8px);
	}
}

@keyframes affinityIconPulse {
	0% { transform: scale(1); }
	50% { transform: scale(1.35); }
	100% { transform: scale(1); }
}

/* Mobile responsive */
@media (max-width: 37.5em) {
	.affinity-hint {
		font-size: 0.82rem;
		padding: 0.55em 1.2em;
		gap: 0.4em;
		top: 8%;
	}

	.affinity-hint__icon {
		font-size: 1.1em;
	}
}

/* =============================================================================
 * Scene Transition Animations
 * 씬 전환용 CSS 애니메이션
 * ============================================================================= */

/* fadeToBlack: 현재 씬 → 검정 (ease-in: 서서히 어두워지다 빠르게 완전 검정) */
@keyframes fadeToBlack {
	from { opacity: 0; }
	to { opacity: 1; }
}
.fadeToBlack {
	animation-name: fadeToBlack;
	animation-timing-function: cubic-bezier(0.55, 0, 1, 0.45);
}

/* fadeFromBlack: 검정 → 새 씬 (ease-out + blur: 빠르게 나타나고 부드럽게 안착) */
@keyframes fadeFromBlack {
	from { opacity: 0; filter: blur(8px); }
	to { opacity: 1; filter: blur(0); }
}
.fadeFromBlack {
	animation-name: fadeFromBlack;
	animation-timing-function: cubic-bezier(0, 0.55, 0.45, 1);
}

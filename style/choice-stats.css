/**
 * ===========================
 * Choice Statistics â€” Sidebar Layout
 * ===========================
**/

/* Row wrapper: button + sidebar */
.choice-row {
	display: flex;
	align-items: center;
	gap: 16px;
	width: 100%;
}

/* Active stats state: disable hover transforms */
.choice-stats-active [data-choice] {
	pointer-events: none;
	cursor: default;
}

.choice-stats-active [data-choice]:hover {
	transform: none !important;
	box-shadow:
		0 4px 20px rgba(255, 183, 197, 0.25),
		0 0 40px rgba(255, 218, 225, 0.1) !important;
}

/* Button takes remaining space inside row */
.choice-row [data-choice] {
	flex: 1;
	min-width: 0;
}

/**
 * Sidebar: bar track + percent label
 **/
.choice-stats-sidebar {
	flex: 0 0 140px;
	display: flex;
	align-items: center;
	gap: 8px;
	opacity: 0;
	animation: sidebarFadeIn 0.3s ease-out forwards;
}

/* Bar track (background) */
.choice-stats-bar-track {
	flex: 1;
	height: 8px;
	border-radius: 4px;
	background: rgba(255, 183, 197, 0.15);
	overflow: hidden;
}

/* Bar fill (foreground) */
.choice-stats-bar-fill {
	height: 100%;
	border-radius: 4px;
	width: 0%;
	transition: width 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

/* Selected sidebar: deep rose gradient + shimmer */
.choice-stats-sidebar.selected .choice-stats-bar-fill {
	background: linear-gradient(90deg, rgba(219, 112, 147, 0.6) 0%, rgba(219, 112, 147, 0.85) 100%);
	position: relative;
	overflow: hidden;
}

.choice-stats-sidebar.selected .choice-stats-bar-fill::after {
	content: "";
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: linear-gradient(
		90deg,
		transparent 0%,
		rgba(255, 255, 255, 0.4) 50%,
		transparent 100%
	);
	border-radius: 4px;
	transform: translateX(-100%);
	animation: shimmerSweep 0.6s ease-out 0.15s forwards;
	pointer-events: none;
}

/* Unselected sidebar: muted mauve */
.choice-stats-sidebar.unselected .choice-stats-bar-fill {
	background: rgba(180, 140, 160, 0.4);
}

.choice-stats-sidebar.unselected {
	opacity: 0;
	animation: sidebarFadeIn 0.3s ease-out forwards;
	filter: saturate(0.6);
}

/* Percentage label: pill badge (static positioning) */
.choice-stats-percent {
	font-weight: 800;
	font-size: 1.05em;
	color: #fff;
	background: rgba(120, 40, 70, 0.7);
	padding: 3px 10px;
	border-radius: 14px;
	border: 1px solid rgba(255, 200, 210, 0.25);
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
	white-space: nowrap;
	opacity: 0;
	animation: percentPopIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/**
 * Button styling (selected / unselected)
 **/

/* Selected button styling: strong border + inner glow + flash bounce */
.choice-stats-selected {
	position: relative;
	overflow: visible !important;
	border-color: rgba(255, 210, 220, 0.8) !important;
	border-width: 2px !important;
	box-shadow:
		0 0 25px rgba(255, 183, 197, 0.45),
		0 0 50px rgba(255, 218, 225, 0.2),
		inset 0 0 20px rgba(255, 183, 197, 0.15) !important;
	animation: selectedPop 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Selected: expanding ring pulse */
.choice-stats-selected::after {
	content: "";
	position: absolute;
	inset: -4px;
	border-radius: 32px;
	border: 2px solid rgba(255, 183, 197, 0.7);
	animation: ringPulse 0.5s ease-out forwards;
	pointer-events: none;
	z-index: 3;
}

/* Selected: checkmark indicator with pop bounce */
.choice-stats-selected::before {
	content: "\2714";
	position: absolute;
	left: 16px;
	top: 50%;
	transform: translateY(-50%);
	font-size: 1.1em;
	color: rgba(255, 220, 230, 0.95);
	text-shadow: 0 1px 3px rgba(120, 40, 70, 0.5);
	z-index: 2;
	opacity: 0;
	animation: checkPopIn 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Unselected button styling: dimmed + desaturated with smooth transition */
.choice-stats-unselected {
	opacity: 0.5;
	transform: scale(0.96);
	filter: saturate(0.6);
	background: linear-gradient(135deg, rgba(255, 183, 197, 0.3) 0%, rgba(255, 218, 225, 0.25) 50%, rgba(248, 187, 208, 0.3) 100%) !important;
	transition: opacity 0.3s, transform 0.3s, filter 0.3s;
}

/**
 * Keyframes
 **/

@keyframes sidebarFadeIn {
	from { opacity: 0; transform: translateX(8px); }
	to   { opacity: 1; transform: translateX(0); }
}

@keyframes selectedPop {
	0%   { transform: scale(0.95); filter: brightness(1.4); }
	40%  { transform: scale(1.04); filter: brightness(1.1); }
	100% { transform: scale(1);    filter: brightness(1);   }
}

@keyframes ringPulse {
	0%   { transform: scale(1);   opacity: 0.7; }
	100% { transform: scale(1.5); opacity: 0;   }
}

@keyframes percentPopIn {
	0%   { opacity: 0; transform: scale(0.5); }
	60%  { opacity: 1; transform: scale(1.15); }
	100% { opacity: 1; transform: scale(1); }
}

@keyframes checkPopIn {
	0%   { opacity: 0; transform: translateY(-50%) scale(0.5); }
	60%  { opacity: 1; transform: translateY(-50%) scale(1.15); }
	100% { opacity: 1; transform: translateY(-50%) scale(1); }
}

@keyframes shimmerSweep {
	0%   { transform: translateX(-100%); }
	100% { transform: translateX(100%); }
}

/**
 * ===========================
 * Choice Statistics Preview
 * ===========================
**/

/* Preview state: keep buttons clickable */
.choice-stats-preview [data-choice] {
	pointer-events: auto;
	cursor: pointer;
}

/* Preview sidebar: lighter style */
.choice-stats-sidebar.preview {
	opacity: 0;
	animation: sidebarFadeIn 0.3s ease-out forwards;
}

.choice-stats-sidebar.preview .choice-stats-bar-track {
	background: rgba(255, 183, 197, 0.1);
}

.choice-stats-sidebar.preview .choice-stats-bar-fill {
	background: rgba(219, 112, 147, 0.35);
}

.choice-stats-sidebar.preview .choice-stats-percent {
	font-weight: 600;
	font-size: 0.9em;
	background: rgba(120, 40, 70, 0.45);
	padding: 2px 8px;
	border-radius: 12px;
	border: 1px solid rgba(255, 200, 210, 0.15);
	text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
	animation: previewPercentFadeIn 0.15s ease-out forwards;
}

@keyframes previewPercentFadeIn {
	from { opacity: 0; }
	to   { opacity: 0.8; }
}

/**
 * ===========================
 * Mobile Responsive
 * ===========================
**/

@media screen and (max-width: 37.5em) {
	.choice-row {
		gap: 10px;
	}

	.choice-stats-sidebar {
		flex: 0 0 110px;
		gap: 6px;
	}

	.choice-stats-bar-track {
		height: 6px;
	}

	.choice-stats-percent {
		font-size: 0.9em;
		padding: 2px 8px;
	}

	.choice-stats-sidebar.preview .choice-stats-percent {
		font-size: 0.8em;
		padding: 1px 6px;
	}

	.choice-stats-selected::before {
		left: 10px;
		font-size: 0.95em;
	}
}
